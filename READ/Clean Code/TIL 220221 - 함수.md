## Today I Learned
2022.02.22.(화)

## 오늘 읽은 범위
3장 - 함수

## 내용
* **함수의 책임**
  - 함수는 한 가지 일만 하며, 변경되는 이유는 하나여야 한다.  
  - 들여쓰기 수준은 1~2단이 적합하다.
  - 함수는 더이상 유의미한 섹션으로 쪼갤 수 없어야 한다.
  - 이름에서 드러나지 않는 부수효과(SideEffect)는 예기치 않은 시간적 결합을 초래할 수 있다.  
    ex) SideEffect를 실행해도 무해한 경우만 사용해야 함.

* **내려쓰기 규칙** (함수의 추상화)
  - 함수는 위에서 아래로 읽어가며 점점 구체화되어야 한다.
  - 위에서 아래로 함수를 연달아 호출할 때, 점점 추상화 수준이 낮아짐을 의미한다.
  ```
    TO 페이지를 구성하려면, 헤더 영역과 본문 영역, 하단 영역을 포함해야 한다. => 높은 추상성
    TO 헤더 영역을 구성하려면, 로그인 상태에 따라 다르게 구성해야 한다.       => 중간 추상성
    TO 로그인 상태를 알아보려면, DB를 살펴본다.                             => 낮은 추상성
    ...
  ```
  
* **함수의 인자**
  - 인자는 무항 또는 단항이 적절하다.
  - 두 개 이상부터는 클래스로 묶어 개념을 드러낼 것을 고려한다.
  - 출력형 인자 대신 반환형을 지정한다.
  
* **switch문은 다형성에 한해 허용**  
  : 분기에 따른 실행은 OCP를 위반한다. 분기 조건이 추가되면 함수에도 직접 그 조건을 추가해야 하기 때문이다.  
    대신 Factory 패턴 등 책임을 분리하고, 직접 드러나지 않도록 하는 것이 바람직하다.
  
* **오류 처리**
  - 오류 처리도 하나의 책임이며, 별도의 함수로 분리할 수 있다.
  ```Java
  public void delete(Page page) {
      try {
          deletePageAndAllReferences(page)
      }
      catch (Exception e) {
          // 에러 처리
      }
  }
  
  private void deletePageAndAllReferences(Page page) throws Exception {...}
  ```


## 인용구
> "각 함수가 너무도 명백했다. 각 함수가 이야기 하나를 표현했다.  
>  각 함수가 너무도 멋지게 다음 무대를 준비했다. 바로 이것이 답이다." - p43

> "코드를 읽으면서 짐작했던 기능을 각 루틴(함수)가 그대로 수행한다면 깨끗한 코드라 불러도 되겠다.  
>  한 가지만 하는 작은 함수에 좋은 이름을 붙인다면 이런 원칙은 이미 절반은 성공했다." - p49

> "대가 프로그래머는 시스템을 프로그램이 아니라 풀어갈 이야기로 여긴다.  
>  프로그래밍 언어라는 수단을 사용해 좀 더 풍부하고 좀 더 표현력이 강한 언어를 만들어 이야기를 풀어간다." - p62

## 소감
 함수의 책임을 분리하다 보면, 자연스레 추상성이 낮아지는 방향으로 깊이가 깊어진다.  
 이러한 추상성을 염두에 두고 비슷한 추상성을 가진 함수끼리 구성하도록 하는 것이 좋겠다는 생각이 든다.
 
## 궁금점

 #노마드클럽 #북클럽 #노개북
